{% extends 'base.html.twig' %}

{% block meta_tags %}
	<meta name="description" content="Klettern rund um München. Hier werden die Klettergebiete rund um München vorgestellt: {% for area in getAreasInformation() %}{{area.name}}{% if loop.last == false  %}, {% else %}{% endif%}{% endfor %}"/>
	<meta name="robots" content="index,follow"/>
	<meta property="og:site_name" content="Munichclimbs">
	<meta property="og:title" content="Munichclimbs"/>
	<meta property="og:type" content="website"/>
	<meta property="og:url" content="https://munichclimbs.de/"/>
	<meta property="og:description" content="Klettern rund um München. Hier werden die Klettergebiete rund um München vorgestellt: {% for area in getAreasInformation() %}{{area.name}}{% if loop.last == false  %}, {% else %}{% endif%}{% endfor %}"/>
{% endblock %}

{% block body %}
	{{ include('partials/_navigation.html.twig') }}
	<main>
		<div class="container my-3">
			<section>
				<div class="py-3 mb-3 d-flex align-items-center justify-content-between">
					<h1 class="h2 mb-0 fw-medium">Klettergebiete um München</h1>
					{% include 'partials/_collapseMap.html.twig' with { collapseId: 'collapseMap', ariaControls: 'collapseMap' } %}
				</div>
				<div class="collapse mt-3" id="collapseMap">
					<div id="map" class="z-10 mb-3" style="width: 100%; height: 500px;">
						{{ include('pageParts/mainMap.html.twig') }}
					</div>
				</div>
				<div class="row">
					<div class="col-md-8">
						<div class="row">
							{% for area in getAreasInformation() %}
								<div class="col-12 col-md-6">
									<a class="d-block" href="{{ path('show_rocks', { slug: area.slug } ) }}" title="Klettergebiet {{ area.name }}">
										<div class="card mb-4 p-0 overflow-hidden">
											<!-- Image Section -->
											<div class="position-relative">
												{% set url = 'https://www.munichclimbs.de/uploads/areas/' %}
												{% include 'partials/_lazy-load-images.html.twig' with {
													'area': area,
													'media': {
														'(min-width: 1200px)': url ~ area.image,
														'(min-width: 800px)': url ~ area.image,
													},
												} %}
												<!-- Overlay with headline -->
												<div class="area-overlay area-overlay-top">
													<div class="area-overlay-content">
														<h2 class="h4 area-title mb-0 fs-6 px-2 py-1">
															{{ area.name }}
														</h2>
													</div>
												</div>
												<!-- Mobile: Grade distribution overlay on image -->
												<div class="grade-distribution d-block d-md-none">
													<div class="grade-bars d-flex position-relative">
														<div class="grade-bar bg-green" style="width: {{ (area.amountEasy / (area.amountEasy + area.amountMiddle + area.amountHard + area.amountProjects) * 100) }}%">
															<span class="grade-count">{{ area.amountEasy }}</span>
															<div class="grade-label">1-5</div>
														</div>
														<div class="grade-bar bg-amber" style="width: {{ (area.amountMiddle / (area.amountEasy + area.amountMiddle + area.amountHard + area.amountProjects) * 100) }}%">
															<span class="grade-count">{{ area.amountMiddle }}</span>
															<div class="grade-label">6-7</div>
														</div>
														<div class="grade-bar bg-red" style="width: {{ (area.amountHard / (area.amountEasy + area.amountMiddle + area.amountHard + area.amountProjects) * 100) }}%">
															<span class="grade-count">{{ area.amountHard }}</span>
															<div class="grade-label">8-11</div>
														</div>
														<div class="grade-bar" style="background-color:black; width: {{ (area.amountProjects / (area.amountEasy + area.amountMiddle + area.amountHard + area.amountProjects) * 100) }}%">
															<span class="grade-count">{{ area.amountProjects }}</span>
															<div class="grade-label">Proj.</div>
														</div>
														<div class="grade-bar" style="background-color:var(--bs-secondary); width: 20%;">
															<span class="grade-count">{{ area.routes }}</span>
															<div class="grade-label">Gesamt</div>
														</div>
													</div>
												</div>
											</div>
											<!-- Content Section -->
											<div class="card-body px-0 pt-1 pb-3 d-none d-md-block">
												<!-- Desktop: Grade distribution in card body -->
												<div class="grade-distribution d-none d-md-block">
													<div class="grade-bars d-flex position-relative">
														<div class="grade-bar bg-green" style="width: {{ (area.amountEasy / (area.amountEasy + area.amountMiddle + area.amountHard + area.amountProjects) * 100) }}%">
															<span class="grade-count">{{ area.amountEasy }}</span>
															<div class="grade-label">1-5</div>
														</div>
														<div class="grade-bar bg-amber" style="width: {{ (area.amountMiddle / (area.amountEasy + area.amountMiddle + area.amountHard + area.amountProjects) * 100) }}%">
															<span class="grade-count">{{ area.amountMiddle }}</span>
															<div class="grade-label">6-7</div>
														</div>
														<div class="grade-bar bg-red" style="width: {{ (area.amountHard / (area.amountEasy + area.amountMiddle + area.amountHard + area.amountProjects) * 100) }}%">
															<span class="grade-count">{{ area.amountHard }}</span>
															<div class="grade-label">8-11</div>
														</div>
														<div class="grade-bar" style="background-color:black; width: {{ (area.amountProjects / (area.amountEasy + area.amountMiddle + area.amountHard + area.amountProjects) * 100) }}%">
															<span class="grade-count">{{ area.amountProjects }}</span>
															<div class="grade-label">Proj.</div>
														</div>
														<div class="grade-bar" style="background-color:var(--bs-secondary); width: 20%; ">
															<span class="grade-count">{{ area.routes }}</span>
															<div class="grade-label">Gesamt</div>
														</div>
													</div>
												</div>
											</div>
										</div>
									</a>
								</div>
							{% endfor %}
						</div>
					</div>
					<div class="col-md-4">
						<div class="gap-3 row-gap-3" style="display: grid;">
							{{ include('partials/_banned-rocks.html.twig') }}
							{{ include('partials/_support-project.html.twig') }}
							{{ include('partials/_latest-routes.html.twig') }}
							{{ include('partials/_latest-comments.html.twig') }}
						</div>
					</div>
				</div>
			</section>
		</div>
	</main>
{% endblock %}
